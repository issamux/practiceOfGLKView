
uniform sampler2D uSamplerBase;
uniform sampler2D uSamplerEff;
varying vec2 vTexcoord;

void main()
{
	mediump vec4 colorDistortion = texture2D(uSamplerEff, vTexcoord);
	if (colorDistortion.a == 0.0) {
		gl_FragColor = texture2D(uSamplerBase, vTexcoord);
	}
	else {
		float uMag = 50.0 / 255.0;
		vec2 vDistortion = vec2(colorDistortion.r - (128.0) / 255.0, 0.0);
		vDistortion *= uMag;
		gl_FragColor = texture2D(uSamplerBase, vDistortion + vTexcoord);
	}
}

